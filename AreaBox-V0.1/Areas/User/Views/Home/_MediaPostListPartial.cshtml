@inject UserManager<ApplicationUser> userManager;
@model List<AreaBox_V0._1.Areas.User.Models.UMediaPostDto.send.UMediaPostOutputDto>
@{
	var currentUserId = (await userManager.GetUserAsync(User))?.Id;
}

@foreach (var post in Model)
{
	<div class="row">
		<div class="col mb-4">
			<div class="card">
				<div class="card-header">
					<div>
						<div class="row align-items-center">
							<div class="col-auto">
								<img src="@post.UserProfilePicture" alt="" srcset="" class="avatar">
							</div>
							<div class="col">
								<input type="hidden" value="@post.Id" id="PostId"/>
								<div class="card-title">@post.UserName</div>
								<div class="card-subtitle">@post.CountryName-@post.CityName / @post.CategoryName</div>
							</div>
						</div>
					</div>
					<div class="card-actions">
						<div class="dropdown">
							<a href="#" class="btn-action dropdown-toggle" data-bs-toggle="dropdown"
							   aria-haspopup="true"
							   aria-expanded="false">
								<!-- Download SVG icon from http://tabler-icons.io/i/dots-vertical -->
								<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24"
									 viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
									 stroke-linecap="round" stroke-linejoin="round">
									<path stroke="none" d="M0 0h24v24H0z" fill="none" />
									<path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
									<path d="M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
									<path d="M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" />
								</svg>
							</a>
							<div class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" style="cursor: pointer;" data-bs-toggle="modal" data-bs-target="#reportPostModal" data-id="@post.Id">Report The Post</a>
								<a class="dropdown-item" style="cursor: pointer;">Save Post</a>
							</div>
						</div>
					</div>
				</div>
				<div class="card-body p-0 text-center">
						<img src="@post.Image" alt="" srcset="" class="w-100">
				</div>
				<div class="card-footer text-start">
					@post.ShortDescription
					<br>
					<br>
					@post.LongDescription
				</div>
				<div class="card-footer text-end">
					<button class="switch-icon likeBtn @(post.MediaPostsLikes.Any(x => x.UserId == currentUserId) ? "active" : "")" data-mpid="@post.Id">
						<span class="switch-icon-a text-secondary">
							<i class="ti ti-heart"></i>
							</span>
						<span class="switch-icon-b text-red">
							<i class="ti ti-heart-filled"></i>
							</span>
					</button>

					<button type="submit" class="btn btn-primary">Submit</button>
				</div>
			</div>
		</div>
	</div>
}